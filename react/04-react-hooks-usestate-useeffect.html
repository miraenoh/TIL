<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React 훅(Hooks) - useState, useEffect | TIL</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/TIL/assets/css/0.styles.794a5ea6.css" as="style"><link rel="preload" href="/TIL/assets/js/app.d0abbb58.js" as="script"><link rel="preload" href="/TIL/assets/js/2.9f7d206a.js" as="script"><link rel="preload" href="/TIL/assets/js/24.a5e508e2.js" as="script"><link rel="prefetch" href="/TIL/assets/js/10.1238b531.js"><link rel="prefetch" href="/TIL/assets/js/11.a389a13a.js"><link rel="prefetch" href="/TIL/assets/js/12.e108a179.js"><link rel="prefetch" href="/TIL/assets/js/13.6a18bf17.js"><link rel="prefetch" href="/TIL/assets/js/14.eedacf65.js"><link rel="prefetch" href="/TIL/assets/js/15.211aea93.js"><link rel="prefetch" href="/TIL/assets/js/16.f713c0c4.js"><link rel="prefetch" href="/TIL/assets/js/17.7ed48acb.js"><link rel="prefetch" href="/TIL/assets/js/18.3f394de5.js"><link rel="prefetch" href="/TIL/assets/js/19.041fcc01.js"><link rel="prefetch" href="/TIL/assets/js/20.7a2991bc.js"><link rel="prefetch" href="/TIL/assets/js/21.1484bcc4.js"><link rel="prefetch" href="/TIL/assets/js/22.3c4cc2d9.js"><link rel="prefetch" href="/TIL/assets/js/23.d15a8536.js"><link rel="prefetch" href="/TIL/assets/js/25.14ada32a.js"><link rel="prefetch" href="/TIL/assets/js/3.6b99c5be.js"><link rel="prefetch" href="/TIL/assets/js/4.b7d0708f.js"><link rel="prefetch" href="/TIL/assets/js/5.9e2f4ca7.js"><link rel="prefetch" href="/TIL/assets/js/6.c7b54f12.js"><link rel="prefetch" href="/TIL/assets/js/7.f65c95cd.js"><link rel="prefetch" href="/TIL/assets/js/8.96971e38.js"><link rel="prefetch" href="/TIL/assets/js/9.f1c299ce.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.794a5ea6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TIL/" class="home-link router-link-active"><!----> <span class="site-name">TIL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/miraenoh/TIL" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/miraenoh/TIL" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>React</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/react/01-jsx.html" class="sidebar-link">JSX</a></li><li><a href="/TIL/react/02-react-components.html" class="sidebar-link">React 컴포넌트(Components)</a></li><li><a href="/TIL/react/03-jsx-objects-and-conditional-in-attributes.html" class="sidebar-link">JSX 속성(Attribute)에 객체 넣기, 조건부 속성 추가하기</a></li><li><a href="/TIL/react/04-react-hooks-usestate-useeffect.html" aria-current="page" class="active sidebar-link">React 훅(Hooks) - useState, useEffect</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/react/04-react-hooks-usestate-useeffect.html#훅-hook-이란" class="sidebar-link">훅(Hook)이란?</a></li><li class="sidebar-sub-header"><a href="/TIL/react/04-react-hooks-usestate-useeffect.html#react-내장-hook" class="sidebar-link">React 내장 Hook</a></li><li class="sidebar-sub-header"><a href="/TIL/react/04-react-hooks-usestate-useeffect.html#react-state와-usestate-hook" class="sidebar-link">React state와 useState Hook</a></li><li class="sidebar-sub-header"><a href="/TIL/react/04-react-hooks-usestate-useeffect.html#state" class="sidebar-link">state</a></li><li class="sidebar-sub-header"><a href="/TIL/react/04-react-hooks-usestate-useeffect.html#react-생명주기-기능과-useeffect-hook" class="sidebar-link">React 생명주기 기능과 useEffect Hook</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Notes</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="react-훅-hooks-usestate-useeffect"><a href="#react-훅-hooks-usestate-useeffect" class="header-anchor">#</a> React 훅(Hooks) - useState, useEffect</h1> <p>React 공식 문서에서 클래스 컴포넌트 대신 사용을 권장하는 훅을 공부해 보자!</p> <h2 id="훅-hook-이란"><a href="#훅-hook-이란" class="header-anchor">#</a> 훅(Hook)이란?</h2> <p><a href="https://ko.reactjs.org/docs/hooks-overview.html" target="_blank" rel="noopener noreferrer">Hook 개요<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><p>Hook은 함수 컴포넌트에서 React state와 생명주기 기능(lifecycle features)을 “연동(hook into)“할 수 있게 해주는 함수입니다.</p></blockquote> <p>👉🏻 Hook은 <strong>함수 컴포넌트</strong>도 클래스 컴포넌트처럼 <code>state</code>와 <code>생명주기 기능</code>을 쓸 수 있게 해 주는 기능이다.</p> <p>React 16.8 버전 이전에는 state와 생명주기 기능을 쓰려면 클래스 컴포넌트를 사용해야 했는데, 16.8 버전부터 Hook을 추가하면서 함수 컴포넌트에서 이 기능들을 쓸 수 있게 됐고, 또 이렇게 사용하는 걸 <a href="https://ko.reactjs.org/docs/hooks-intro.html#motivation" target="_blank" rel="noopener noreferrer">공식 문서에서도 권장하고 있다<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="react-내장-hook"><a href="#react-내장-hook" class="header-anchor">#</a> React 내장 Hook</h2> <p>React 라이브러리 자체에 내장되어 사용할 수 있는 Hook들이다. 👇🏻</p> <ul><li>기본 Hooks
<ul><li><code>useState</code> <code>useEffect</code> <code>useContext</code></li></ul></li> <li>추가 Hooks
<ul><li><code>useReducer</code> <code>useCallback</code> <code>useMemo</code> <code>useRef</code>, <code>useImperativeHandle</code> <code>useLayoutEffect</code> <code>useDebugValue</code></li></ul></li></ul> <p>기본적으로 위의 세 가지 Hook을 제공하고, 추가 Hook들은 &quot;기본 Hook의 변경이거나 특정한 경우에만 필요한 것&quot;이라고 한다. 추가 훅은 아직 사용해 본 적 없는데...필요할 때 공부해서 쓰면 될 것 같다.</p> <h2 id="react-state와-usestate-hook"><a href="#react-state와-usestate-hook" class="header-anchor">#</a> React <code>state</code>와 <code>useState</code> Hook</h2> <p><a href="https://ko.reactjs.org/docs/hooks-state.html" target="_blank" rel="noopener noreferrer">Using the State Hook<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="state"><a href="#state" class="header-anchor">#</a> state</h2> <p>React에서 <code>state</code>는 함수 내에 선언된 변수처럼 React 컴포넌트 안에서 관리되는 JS 객체이다.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>나는 대충 컴포넌트 안의 변수인데, 값을 바꾸면 UI에도 자동으로 업데이트되는 신기한 변수(...)라고 이해함...</p></div> <h3 id="class-component에서의-state"><a href="#class-component에서의-state" class="header-anchor">#</a> Class Component에서의 state</h3> <p>Hook 이전에는 함수 컴포넌트가 아닌 클래스 컴포넌트에서만 쓸 수 있었고, 이런 식으로👇🏻 썼다.</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">Example</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">You clicked </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token plain-text"> times</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Click me</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
		<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>this.state</code> 객체를 두고, 이 객체 안에 관리할 값들을 속성(Property)로 둔다. 이 값들은 컴포넌트 안에서 <code>this.state.속성이름</code>으로 접근할 수 있고, 업데이트할 때는 <code>this.setState({속성이름: 새 값})</code> 이런 식으로 <code>setState</code> 함수를 호출해서 업데이트한다.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>state 값을 업데이트 할 때는 변수처럼 직접 접근해서 업데이트하지 않는다. 그렇게 해 봤자 UI에 렌더링되지 않으니까 state를 쓰는 의미가 없다.</p></div> <p>아무튼 이전에는 클래스 컴포넌트에서 이런 식으로 썼는데, <code>useState</code> Hook을 사용하면 함수 컴포넌트에서도 state 사용이 가능하다. (클래스 컴포넌트에서 this의 object로 선언하고, 관리하는 방식이 코드 보기에 썩 좋지도 않은 것 같다...)</p> <h3 id="function-component에서의-state"><a href="#function-component에서의-state" class="header-anchor">#</a> Function component에서의 state</h3> <div class="language-jsx extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br></div><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">You clicked </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token plain-text"> times</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Click me</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Hook은 <code>React.useState(...)</code>이런식으로 쓸 수도 있고, 👆🏻위처럼 import문에서 따로 Hook을 import하면 그냥 <code>useState</code> 이런식으로 쓸 수도 있다.</p> <p>함수 컴포넌트에서처럼 하나의 객체에 속성으로 넣는 게 아니라 stateful하게 사용할 값을 각각 const로 선언해주는데, 이 때 <code>useState</code> 함수를 사용한다.</p> <p><code>useState</code> 함수는 에디터의 설명에 따르면 <strong>stateful</strong>한 <strong>값</strong>과 이걸 <strong>업데이트할 함수</strong>를 반환한다. 이 두개를 순서대로 반환하기 때문에, ES6 문법 <code>destructuring</code>을 이용해서 <code>[statefulValue, setStatefulValue] = useState(initialValue)</code> 이런식으로 사용할 값을 세팅해준다.</p> <p>컴포넌트 안에서 값에 접근 &amp; 업데이트하는 방식도 다른데, <code>this.state.~~</code> 이런식으로 쓰지 않고 그냥 컴포넌트 안의 변수/함수처럼 <code>this.state</code> 없이 바로 접근하고 호출한다.</p> <p>stateful한 값을 여러개 사용하고 싶을 때는,</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>someValue<span class="token punctuation">,</span> setSomeValue<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>초기값<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>👆🏻이렇게 <code>useState</code> 훅을 여러번 사용하면 된다.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>state 업데이트는 <strong>비동기</strong>(Asynchronous)이다. 따라서 만약에 어떤 메소드 안에서 set~~을 이용해 state 값을 업데이트하고 바로 다음줄에 그 값을 콘솔에다 찍으면 업데이트 전 값이 나온다. 비동기라는걸 염두하고 코드를 쓰자!</p></div> <h2 id="react-생명주기-기능과-useeffect-hook"><a href="#react-생명주기-기능과-useeffect-hook" class="header-anchor">#</a> React 생명주기 기능과 <code>useEffect</code> Hook</h2> <p><a href="https://ko.reactjs.org/docs/hooks-effect.html" target="_blank" rel="noopener noreferrer">Using the Effect Hook<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>클래스 컴포넌트에서는 <code>componentDidMount()</code>, <code>componentWillUnmount()</code>, <code>componentDidUpdate()</code>와 같은 생명주기 메소드를 사용하여 컴포넌트가 렌더링되고 업데이트되는 등의 생명주기를 거칠 때 필요한 일을 처리했다.</p> <p>이런 작업들을 <strong>side effect</strong>, 줄여서 <strong>effect</strong>라고 하는데 이 단어에서 나온게 <code>useEffect</code> Hook으로, 함수 컴포넌트의 생명주기에 관련해서 effect들을 처리할 수 있게 해주는 기능이다.</p> <p>특히, 함수 컴포넌트에서 여러 생명주기 메소드에 나눠서 처리해야 했던 부분을 <code>useEffect</code> 문법 하나로 다 할 수 있게 만들어져 있다.</p> <h3 id="useeffect로-컴포넌트가-렌더링될-때마다-effect-처리하기"><a href="#useeffect로-컴포넌트가-렌더링될-때마다-effect-처리하기" class="header-anchor">#</a> <code>useEffect</code>로 컴포넌트가 렌더링될 때마다 effect 처리하기</h3> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// componentDidMount, componentDidUpdate와 같은 방식으로</span>
	<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token comment">// 브라우저 API를 이용하여 문서 타이틀을 업데이트합니다.</span>
		document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>👆🏻위 코드에서 effect란 state value인 <code>count</code>의 값에 맞게 웹 페이지 제목을 업데이트 하는 작업이다.</p> <p><code>useEffect</code> Hook에 effect를 수행하는 함수를 인자로 전달해서 처리한다. 이 때 그 함수 내부의 작업은 해당 컴포넌트가 렌더링 될 때마다, 즉 함수 컴포넌트로 치면 <code>componentDidMount</code>와 <code>componentDidUpdate</code>가 호출되는 시점마다 불러내져서 처리된다.</p> <p>그런데 컴포넌트가 그려질 때 뿐만 아니라 컴포넌트가 없어질 때, 무언가를 정리하는(Clean-up) 작업을 해야 하는 경우가 많다. 이 때는 <code>useEffect</code>에 넘기는 함수에서 Clean-up 함수를 <code>return</code>해주면 된다.</p> <h3 id="effect-함수-안에서-return으로-clean-up-처리하기"><a href="#effect-함수-안에서-return으로-clean-up-처리하기" class="header-anchor">#</a> effect 함수 안에서 <code>return</code>으로 Clean-up 처리하기</h3> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">FriendStatus</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>isOnline<span class="token punctuation">,</span> setIsOnline<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">handleStatusChange</span><span class="token punctuation">(</span><span class="token parameter">status</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setIsOnline</span><span class="token punctuation">(</span>status<span class="token punctuation">.</span>isOnline<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    ChatAPI<span class="token punctuation">.</span><span class="token function">subscribeToFriendStatus</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>id<span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// effect 이후에 어떻게 정리(clean-up)할 것인지 표시합니다.</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">cleanup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      ChatAPI<span class="token punctuation">.</span><span class="token function">unsubscribeFromFriendStatus</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>id<span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>👆🏻위 코드에서는 <code>useEffect</code>에 전달하는 함수 하나에서 effect를 처리하고, <code>return</code>해주는 함수로 Clean-up까지 함께 써주고 있다. 이 때 주의할 점은, 리턴해주는 Clean-up 부분의 코드는 <code>componentWillUnmount</code>일 때만 호출되는 게 아니라, 컴포넌트가 업데이트 되어서 effect 함수 내부의 부분들이 재실행 되기 전에도 호출되어서 정리를 해준다는 점이다.</p> <h3 id="로직이-다른-effect들-분리하기"><a href="#로직이-다른-effect들-분리하기" class="header-anchor">#</a> 로직이 다른 effect들 분리하기</h3> <p>클래스 컴포넌트의 생명주기 메소드와 차별화되는 <code>useEffect</code> 훅의 장점은 생명주기별로 여러개의 effect들을 묶어서 써주지 않고, 각 effect별로 생명주기별 수행할 내용을 모아서 써줄 수 있다는 점이다.</p> <p>예를 들어서 위에 나왔던 <code>count</code> 예제와 친구상태구독 예제에서의 effect들은 서로 다른 로직인데, 이 로직들을 각각의 <code>useEffect</code>로 분리할 수 있다.</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">FriendStatusWithCounter</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">const</span> <span class="token punctuation">[</span>isOnline<span class="token punctuation">,</span> setIsOnline<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">function</span> <span class="token function">handleStatusChange</span><span class="token punctuation">(</span><span class="token parameter">status</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">setIsOnline</span><span class="token punctuation">(</span>status<span class="token punctuation">.</span>isOnline<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		ChatAPI<span class="token punctuation">.</span><span class="token function">subscribeToFriendStatus</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>id<span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			ChatAPI<span class="token punctuation">.</span><span class="token function">unsubscribeFromFriendStatus</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>friend<span class="token punctuation">.</span>id<span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>생명주기별로 따로 쓰던 코드는 모아서 쓸 수 있고, 서로 다른 로직을 같이 써야했던 걸 분리할 수 있다!</p> <h3 id="useeffect-두-번째-인자로-특정-상황에만-effect-처리하기"><a href="#useeffect-두-번째-인자로-특정-상황에만-effect-처리하기" class="header-anchor">#</a> <code>useEffect</code> 두 번째 인자로 특정 상황에만 effect 처리하기</h3> <p>위의 코드들처럼 <code>useEffect</code>에 effect를 수행하는 함수 하나만 인자로 넘겨서 호출하면 컴포넌트가 그려질 때마다 <strong>매번</strong> effect 함수를 호출하게 된다. 하지만 특정 상황에만 effect를 처리하고 싶을 때가 많기 때문에, 그걸 위한 추가 기능이 있다.</p> <p>위의 카운트 예제에서는 컴포넌트 안의 뭐라도 바뀌면 무조건 <code>document.title</code>을 업데이트하도록 되어있는데, 당연히 <code>count</code> 값이 바뀔 때에만 저 effect를 처리하고 싶어진다.</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// count가 바뀔 때만 effect를 재실행합니다.</span>
</code></pre></div><p>그럴 땐 👆🏻이렇게 <code>useEffect</code>의 두 번째 인자로 배열을 넣어준다. 이 배열 안에는 '이 값이 바뀌면 이 effect를 실행하겠다!' 하는 값들(<code>prop</code> or <code>state</code>)을 넣어준다. 이렇게 하면 배열 안의 값들에 변경이 생길 때에만 effect를 적용할 수 있다(배열의 여러 값들중에 하나만 바뀌어도 실행된다). 이렇게 유용한 <code>useEffect</code> 두 번째 인자는</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> prevState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>prevState<span class="token punctuation">.</span>count <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>이런 식으로 <code>if</code>문으로 검사하는걸 <code>useEffect</code> Hook API에 내재시킨 거라고 한다👍🏻</p> <h3 id="컴포넌트가-mount-unmount-될-때만-effect-실행하기"><a href="#컴포넌트가-mount-unmount-될-때만-effect-실행하기" class="header-anchor">#</a> 컴포넌트가 mount / unmount 될 때만 effect 실행하기</h3> <p><code>useEffect</code>를 사용한 effect 처리는 <code>componentDidMount()</code>, <code>componentWillUnmount()</code>, <code>componentDidUpdate()</code>를 다 짬뽕시킨거라 딱! 컴포넌트가 마운트/언마운트 됐을 때만 effect를 실행하고 싶을 때 어떻게 해야 하나 난감했다. 해결법은 간단한데, <code>useEffect</code>의 두 번째 인자에 빈 배열 <code>[]</code>을 전달하면 된다.</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>👆🏻이렇게 하면 <code>componentDidMount()</code>와 동일하게 컴포넌트가 mount될 때에만 effect가 적용된다.</p> <p>새로운 API는 아니고, <code>useEffect</code>의 두 번째 인자 안의 값이 하나라도 바뀌면 effect가 실행되는 원리인데 <code>[]</code>안에는 아무 값도 없어서 바뀔 일도 없다. 그래서 이 effect는 처음에만 실행되는 것!</p> <p>같은 원리로 <code>componentWillUnmount()</code>처럼 쓰려면</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token function">doCleanUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>[]</code>을 두 번째 인자로 넣고 <code>return</code> 안에 처리할 내용을 넣어주면 된다.</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token function">doCleanUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>👆🏻이런 식으로 <code>componentDidMount</code>와 <code>componentWillUnmount</code>를 함께 기술할 수도 있다.</p> <p>하.지.만 React 문서에서는 이렇게 사용하는 걸 주의하라고 한다. 왜냐면 내 머릿속에는 처음 그릴 때만 적용하면 되는 effect이지만, 사실은 외부의 컴포넌트에서 전달된 props가 바뀌면 다시 실행되어야 하는 경우가 있기 때문이라고.</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">ProductPage</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> productId <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token punctuation">[</span>product<span class="token punctuation">,</span> setProduct<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'http://myapi/product/'</span> <span class="token operator">+</span> productId<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// productId props 사용</span>
		<span class="token keyword">const</span> json <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">setProduct</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token function">fetchProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 🔴 `fetchProduct`가`productId`를 사용하므로 잘못되었습니다</span>
	<span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>처음에만 데이터를 읽어오면 된다고 생각해서 <code>[]</code>를 인자로 전달하고 effect를 썼는데, 사실 이 effect 안에서는 <code>productId</code>라는 프로퍼티를 사용하기 때문에 외부에서 이 프로퍼티를 바꾸면 다시 실행되어야 한다.</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">ProductPage</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> productId <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token punctuation">[</span>product<span class="token punctuation">,</span> setProduct<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'http://myapi/product/'</span> <span class="token operator">+</span> productId<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">const</span> json <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">setProduct</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token function">fetchProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>productId<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ✅ 효과는 productId 만 사용하므로 유효합니다</span>
	<span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>그래서 이렇게 종속성을 따져서 배열에 넣어줘야 한다.</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ✅ 이 예에서는 컴포넌트 범위의 *어떤* 값도 사용하지 않기 때문에 좋습니다</span>
</code></pre></div><p>👆🏻이렇게 아예 독립적인 경우에는 <code>[]</code>만 전달해서 사용해도 괜찮다. 공식 문서에서 주의주는 건 <code>[]</code>을 전달해서 <code>componentDidMount</code>처럼 사용할 때, 이 effect가 정말 <strong>처음 그려질 때 한 번만 실행되는</strong> effect가 맞는지 확인하라는 것 같다.</p> <p>React에는 <code>useState</code>, <code>useEffect</code> 말고도 내장 훅들이 있고 심지어 커스텀 훅을 만들 수도 있는데, 필요할 때 좀 더 공부해서 추가해야겟당</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/miraenoh/TIL/edit/main/docs/react/04-react-hooks-usestate-useeffect.md" target="_blank" rel="noopener noreferrer">Help me improve this page!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/4/2022, 3:05:15 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/TIL/react/03-jsx-objects-and-conditional-in-attributes.html" class="prev">
        JSX 속성(Attribute)에 객체 넣기, 조건부 속성 추가하기
      </a></span> <span class="next"><a href="/TIL/notes/to-study.html">
        앞으로 작성할 주제
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/TIL/assets/js/app.d0abbb58.js" defer></script><script src="/TIL/assets/js/2.9f7d206a.js" defer></script><script src="/TIL/assets/js/24.a5e508e2.js" defer></script>
  </body>
</html>
